<!DOCTYPE html>
<html lang="{{ .Site.LanguageCode }}">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="{{ if .Description }}{{ .Description }}{{ else }}{{ .Site.Params.description }}{{ end }}">
    <title>{{ if .Title }}{{ .Title }} - {{ end }}{{ .Site.Title }}</title>
    <link rel="stylesheet" href="{{ "css/style.css" | relURL }}?v={{ now.Unix }}">
</head>

<body>
    <header>
        <nav>
            <a href="{{ "/" | relURL }}" class="nav-logo">{{ .Site.Title }}</a>
            <button class="nav-toggle" onclick="toggleNav()" aria-label="Toggle navigation">
                <svg class="hamburger" width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
                </svg>
                <svg class="close" width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                </svg>
            </button>
            <div class="nav-links">
                {{ range .Site.Menus.main }}
                <a href="{{ .URL | relURL }}">{{ .Name }}</a>
                {{ end }}
            </div>
        </nav>
    </header>

    <main>
        {{ block "main" . }}{{ end }}
    </main>

    <footer>
        <p>&copy; {{ now.Year }} {{ .Site.Params.author }}. All rights reserved.</p>
    </footer>

    <script>
        function toggleTOC() {
            const toc = document.querySelector('.toc');
            if (toc) {
                toc.classList.toggle('collapsed');
            }
        }

        function toggleNav() {
            const nav = document.querySelector('nav');
            nav.classList.toggle('nav-open');
        }

        // Close nav when clicking outside
        document.addEventListener('click', function(event) {
            const nav = document.querySelector('nav');
            const navToggle = document.querySelector('.nav-toggle');

            if (nav.classList.contains('nav-open') &&
                !nav.contains(event.target) &&
                !navToggle.contains(event.target)) {
                nav.classList.remove('nav-open');
            }
        });

        // Close nav when clicking a link
        document.querySelectorAll('.nav-links a').forEach(link => {
            link.addEventListener('click', () => {
                document.querySelector('nav').classList.remove('nav-open');
            });
        });
    </script>
</body>

</html>